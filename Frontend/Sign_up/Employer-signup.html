<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="Signup_style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

</head>

<body>
    <header>
        <div class="logo">
            <h2>Work Hub</h2>
        </div>
        <nav class="navi">
            <ul>
                <li><a href="#" class="menu_btn">Find Job</a></li>
                <li><a href="#" class="menu_btn"><span><ion-icon name="reader-outline"></ion-icon></span>My CV</a></li>
                <li><a href="#" class="menu_btn"><span><ion-icon
                                name="notifications-outline"></ion-icon></span>Notification</a></li>
                <li><a href="#" class="menu_btn"><span><ion-icon
                                name="person-circle-outline"></ion-icon></span>Account</a></li>
                <li><a href="../Login/Login.html"><button type="button" class="btn_login"
                            value="Login">Login</button></a></li>
            </ul>
        </nav>

    </header>

    <main>
        <div class="signup_box">
            <h2>SIGN UP</h2>
            <h4>Step 2</h4> <br>
            <form action="" method="get" id="signup-form-step2">
                <div class="info">
                    <label>Employer Name</label>
                    <input type="text" id="employer-name" placeholder="VD:Công ty cổ phần  ABC" autofocus>
                </div>

                <div class="info">
                    <label>Field</label>
                    <select name="field" id="field" class="field">
                        <option value="choose-field">Choose field of your company</option>
                        <option value="IT">IT</option>
                    </select>
                </div>
                <div id="error-message-field" class="error-message"></div>

                <div class="info">
                    <label>Size</label>
                    <select name="size" id="size" class="size">
                        <option value="choose-size">Choose size of your company</option>
                        <option value="under10">Under 10 employees</option>
                        <option value="10-30">10-30 employees</option>
                        <option value="30-100 ">30-100 employees</option>
                        <option value="100-300">100-300 employees</option>
                        <option value="more300">More than 300 employees</option>
                    </select>
                </div>
                <div id="error-message-size" class="error-message"></div>

                <div class="info">
                    <label>Address</label>
                    <input type="text" id="address" placeholder="Address" required>
                </div>

                <div class="info">
                    <label>Phone number</label>
                    <input type="tel" id="phone-number" placeholder="Phone number" pattern="0[0-9]{9}" required>
                </div>

                <div class="signup_btn">
                    <input type="submit" name="btnSignUp" value="Sign Up">
                </div>

            </form>
        </div>
    </main>

    <script>
        function validateInfomation(field, size){
            errorMessageField = document.getElementById('error-message-field');
            errorMessageSize = document.getElementById('error-message-size');
            validField=false;
            validSize=false;
            if(field==="choose-field"){
                errorMessageField.innerHTML="<p>Please choose your company field!</p>";
                validField= false;
            }else{
                errorMessageField.innerHTML="";
                validField=true;
            }

            if(size==="choose-size"){
                errorMessageSize.innerHTML="<p>Please choose your company size!</p>";
                    validSize=false;
            }else{
                errorMessageSize.innerHTML="";
                validSize=true;
            }
            
            if(validField===validSize && validField===true ){
                return true;
            }
        }

        document.getElementById('signup-form-step2').addEventListener('submit', function (event) {
            event.preventDefault();

            let employerName = document.getElementById('employer-name').value;
            let field = document.getElementById('field').value;
            let size = document.getElementById('size').value
            let address = document.getElementById('address').value;
            let phoneNumber = document.getElementById('phone-number').value;

            if(!validateInfomation(field,size)){
                return;
            }
            
            let employer = JSON.parse(localStorage.getItem('user'));

            employer.employerName = employerName;
            employer.field = field;
            employer.size = size;
            employer.address = address;
            employer.phoneNumber = phoneNumber;

            let list_employer = JSON.parse(localStorage.getItem('list_employer')) || [];

            list_employer.push(employer);

            localStorage.setItem('list_employer', JSON.stringify(list_employer));

            localStorage.removeItem('user');

            window.location.href = '../Login/login.html'
        })
    </script>
</body>

</html>