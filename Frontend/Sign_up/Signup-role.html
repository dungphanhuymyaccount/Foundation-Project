<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="Signup_style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

</head>

<body>
    <header>
        <div class="logo">
            <h2>Work Hub</h2>
        </div>
        <nav class="navi">
            <ul>
                <li><a href="#" class="menu_btn">Find Job</a></li>
                <li><a href="#" class="menu_btn"><span><ion-icon name="reader-outline"></ion-icon></span>My CV</a></li>
                <li><a href="#" class="menu_btn"><span><ion-icon
                                name="notifications-outline"></ion-icon></span>Notification</a></li>
                <li><a href="#" class="menu_btn"><span><ion-icon
                                name="person-circle-outline"></ion-icon></span>Account</a></li>
                <li><a href="../Login/Login.html"><button type="button" class="btn_login"
                            value="Login">Login</button></a></li>
            </ul>
        </nav>

    </header>

    <main>
        <div class="signup_box">
            <form id="signup-form-step1" novalidate>
                <h2>SIGN UP</h2>
                <h4>Step 1</h4> <br>
                <div class="info">
                    <label>Email</label>
                    <input type="email" id="email" placeholder="Email@gmail.com" required>

                </div>
                <div id="error-message-email" class="error-message"></div>

                <div class="info">
                    <label>Password</label>
                    <input type="password" id="password" placeholder="Password" required>
                </div>
                <div id="error-message-password" class="error-message"></div>

                <div class="choose-role">
                    <input type="submit" class="role" name="role" id="student" value="Student">
                    <input type="submit" class="role" name="role" id="employer" value="Employer">
                </div>
            </form>
        </div>
    </main>
    <script>
        let email = "";
        let password = "";
        let role = "";

        function validate(email, password) {
            const email_pattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            const password_pattern = /^.{6,}$/;
            const error_message_email = document.getElementById('error-message-email');
            const error_message_password = document.getElementById('error-message-password');
            let validEmail = true;
            let validPassword=true;
            let isValid= false
            if (!email) {
                error_message_email.innerHTML = "<p>Please enter your email!</p>";
                validEmail = false;
            }
            else {
                //kiểm tra đúng định dạng không
                if (!email_pattern.test(email)) {
                    error_message_email.innerHTML = "<p>Incorrect format. Please enter again!</p>";
                    validEmail = false;
                }
                else {
                    error_message_email.innerHTML = "";
                    validEmail = true;
                }

            }

            //kiểm tra đã điền mật khẩu chưa
            if (!password) {
                error_message_password.innerHTML = "<p>Please enter your password!</p>";
                validPassword = false;
            }
            else {
                error_message_password.innerHTML = "";
                validPassword = true;
            }

            //kiểm tra đúng định dạng chưa
            if (!password_pattern.test(password)) {
                error_message_password.innerHTML = "<p>Your password must contain at least 6 characters!</p>";
                validPassword = false;
            }
            else {
                error_message_password.innerHTML = "";
                validPassword = true;
            }

            if((validEmail===validPassword && validEmail===true)){
                isValid=true;
            }
            return isValid;
        }

        document.getElementById('signup-form-step1').addEventListener('submit', function (event) {
            event.preventDefault();

            email = document.getElementById('email').value;
            password = document.getElementById('password').value;
            role = event.submitter.value;
            //kiểm tra định dạng thông tin
            if (!validate(email, password)) {
                return;
            };

            let user=({
                email: email,
                password: password,
                role: role
            });

            

            localStorage.setItem('user', JSON.stringify(user));
            if (role === 'Student') {
                window.location.href = 'Student-signup.html'
            }
            if (role === 'Employer') {
                window.location.href = 'Employer-signup.html'
            }
        });
    </script>
</body>

</html>